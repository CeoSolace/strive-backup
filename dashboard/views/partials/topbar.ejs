<header class="sticky top-0 z-40 border-b border-zinc-200 bg-white/70 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:border-zinc-800 dark:bg-zinc-950/60">
  <div class="mx-auto flex h-16 max-w-7xl items-center gap-3 px-4 sm:px-6 lg:px-8">
    <button
      type="button"
      class="inline-flex items-center justify-center rounded-xl p-2 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:text-zinc-300 dark:hover:bg-zinc-900 dark:hover:text-zinc-50 lg:hidden"
      data-action="open-mobile-nav"
      aria-label="Open navigation"
    >
      <span class="text-lg">☰</span>
    </button>

    <div class="relative flex-1">
      <label class="sr-only" for="global-search">Search</label>
      <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-zinc-400">⌕</div>
      <input
        id="global-search"
        type="search"
        placeholder="Search servers, modules, commands…"
        class="w-full rounded-2xl border border-zinc-200 bg-white px-10 py-2 text-sm shadow-sm placeholder:text-zinc-400 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-zinc-800 dark:bg-zinc-950 dark:placeholder:text-zinc-500"
        data-global-search
      />
    </div>

    <button
      type="button"
      class="inline-flex items-center gap-2 rounded-2xl bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-soft transition hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-zinc-950"
      data-action="invite"
    >
      Invite Bright
    </button>

    <button
      type="button"
      class="inline-flex items-center justify-center rounded-xl p-2 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:text-zinc-300 dark:hover:bg-zinc-900 dark:hover:text-zinc-50"
      data-action="toggle-theme"
      aria-label="Toggle theme"
      title="Toggle theme"
    >
      <span class="text-lg">◐</span>
    </button>

    <div class="relative">
      <button
        type="button"
        class="flex items-center gap-3 rounded-2xl border border-zinc-200 bg-white px-3 py-2 text-left text-sm shadow-sm hover:bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-brand-500/30 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900"
        data-action="user-menu"
        aria-haspopup="menu"
        aria-expanded="false"
      >
        <img
          class="h-7 w-7 rounded-full"
          src="<%= user?.displayAvatar || ('https://cdn.discordapp.com/embed/avatars/0.png') %>"
          alt=""
          referrerpolicy="no-referrer"
        />
        <div class="hidden max-w-[12rem] min-w-0 sm:block">
          <div class="truncate font-semibold"><%= user?.username || 'User' %></div>
          <div class="truncate text-xs text-zinc-500 dark:text-zinc-400"><%= user?.id || '' %></div>
        </div>
        <div class="text-zinc-400">▾</div>
      </button>

      <div
        class="absolute right-0 mt-2 hidden w-56 overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-soft dark:border-zinc-800 dark:bg-zinc-950"
        role="menu"
        data-user-menu
      >
        <a class="block px-4 py-3 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-900" href="/app/account/profile" role="menuitem">Account</a>
        <a class="block px-4 py-3 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-900" href="/app/privacy-consent" role="menuitem">Privacy &amp; Consent</a>
        <div class="h-px bg-zinc-200 dark:bg-zinc-800"></div>
        <a class="block px-4 py-3 text-sm text-red-600 hover:bg-zinc-50 dark:hover:bg-zinc-900" href="/logout" role="menuitem">Sign out</a>
      </div>
    </div>
  </div>
</header>
