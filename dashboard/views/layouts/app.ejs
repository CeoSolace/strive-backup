<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title><%= pageTitle ? pageTitle + ' Â· ' : '' %>Bright Dashboard</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CDN (production note: consider building tailwind) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: ['class'],
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
            boxShadow: {
              soft: '0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.08)',
            },
            colors: {
              brand: {
                50: '#f5f7ff',
                100: '#e9edff',
                200: '#cfd8ff',
                300: '#a8b8ff',
                400: '#7f8dff',
                500: '#5a63ff',
                600: '#4048e6',
                700: '#3338b4',
                800: '#2d318f',
                900: '#26296e',
              },
            },
          },
        },
      };
    </script>

    <link rel="stylesheet" href="/css/app.css" />
  </head>
  <body class="h-full bg-zinc-50 text-zinc-900 antialiased dark:bg-zinc-950 dark:text-zinc-50">
    <script>
      // Theme bootstrap (no flash)
      (function () {
        try {
          var saved = localStorage.getItem('bright_theme');
          var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          var theme = saved || (prefersDark ? 'dark' : 'light');
          if (theme === 'dark') document.documentElement.classList.add('dark');
        } catch (e) {}
      })();
    </script>

    <div class="min-h-full">
      <div class="flex min-h-screen">
        <%- include('../partials/sidebar', { user, activePath: (typeof activePath !== 'undefined' ? activePath : '') }) %>

        <div class="flex min-w-0 flex-1 flex-col">
          <%- include('../partials/topbar', { user }) %>

          <main class="flex-1">
            <div class="mx-auto w-full max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
              <%- body %>
            </div>
          </main>

          <div id="toast-root" class="pointer-events-none fixed inset-x-0 bottom-4 z-50 flex justify-center px-4"></div>
        </div>
      </div>
    </div>

    <%- include('../partials/consent-banner') %>

    <script src="/js/app.js"></script>
  </body>
</html>
